<!DOCTYPE html>
<html>
<head>
  <title>Image Picker</title>
</head>
<body>
  <input type="file" id="file-upload" accept="image/*" style="display: none;">

  <script>
    const fileInput = document.getElementById('file-upload');

    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      const reader = new FileReader();

      reader.onload = function(e) {
        // Send the base64 data to Thunkable
        window.ReactNativeWebView.postMessage(e.target.result);
      }

      if (file) {
        reader.readAsDataURL(file);
      }
    });

    // Listen for a message from Thunkable to trigger the file input
    document.addEventListener("message", function(event) {
        if (event.data === "openImagePicker") {
            fileInput.click(); // Programmatically click the hidden input
        }
    });
  </script>
</body>
</html>
